!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s(require("cross-fetch/polyfill"),require("js-base64"),require("immutable"),require("moment"),require("sip.js"),require("reconnecting-websocket")):"function"==typeof define&&define.amd?define(["cross-fetch/polyfill","js-base64","immutable","moment","sip.js","reconnecting-websocket"],s):e["@wazo/sdk"]=s(null,e.jsBase64,e.Immutable,e.moment,e.SIP,e.ReconnectingWebSocket)}(this,function(e,s,t,n,r,i){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i;class a{static fromResponse(e){return new a(e.message,e.timestamp,e.error_id,e.details)}static fromText(e){return new a(e)}constructor(e,s=null,t=null,n=null){this.message=e,this.timestamp=s,this.errorId=t,this.details=n}}class o{static hasDebug(){return"undefined"!=typeof process&&(1==+process.env.DEBUG||"true"===process.env.DEBUG)}static logRequest(e,{method:s,body:t,headers:n},r){if(!o.hasDebug())return;const{status:i}=r;let a=`${i} - curl ${"get"!==s?`-X ${s.toUpperCase()}`:""}`;Object.keys(n).forEach(e=>{a+=` -H '${e}: ${n[e]}'`}),a+=` ${e}`,t&&(a+=` -d '${t}'`),console.info(a)}}const l=["head","get","post","put","delete"];class u{static successResponseParser(e,s){return 204===e.status}static parseBadResponse(e){return s=>s instanceof a?s:e(s)}static defaultParser(e,s){return e.ok?e.json().then(e=>e):(s?e.json():e.text()).then(e=>s?a.fromResponse(e):a.fromText(e))}static getHeaders(e){return e instanceof Object?e:{"X-Auth-Token":e,Accept:"application/json","Content-Type":"application/json"}}static getQueryString(e){return Object.keys(e).filter(s=>e[s]).map(s=>`${s}=${encodeURIComponent(e[s])}`).join("&")}static base64Encode(e){return"undefined"!=typeof btoa?btoa(e):s.Base64.encode(e)}constructor({server:e,agent:s=null}){this.server=e,this.agent=s,l.forEach(e=>{u.prototype[e]=function(...s){return s.splice(1,0,e),this.call.call(this,...s)}})}call(e,s="get",t=null,n=null,r=u.defaultParser){const i=this.computeUrl(s,e,t),a=t&&"get"!==s?JSON.stringify(t):null,l="delete"===s||"head"===s?u.successResponseParser:r,d={method:s,body:a,headers:n?u.getHeaders(n):{},agent:this.agent};return fetch(i,d).then(e=>{const s=-1!==(e.headers.get("content-type")||"").indexOf("application/json");if(o.logRequest(i,d,e),e.status>=500){return(s?e.json():e.text()).then(e=>{throw e})}return l(e,s)})}computeUrl(e,s,t){const n=`${this.baseUrl}/${s}`;return"get"===e&&t&&Object.keys(t).length?`${n}?${u.getQueryString(t)}`:n}get baseUrl(){return`https://${this.server}/api`}}const d=t.Record({id:void 0,extensions:[]});class c extends d{static parse(e){return new c({id:e.id,extensions:e.extensions})}}const p={BUSY:"busy",NO_ANSWER:"noanswer",UNCONDITIONAL:"unconditional"},m=t.Record({destination:void 0,enabled:void 0,key:void 0});class h extends m{static parse(e,s){return new h({destination:e.destination||"",enabled:e.enabled,key:s})}setDestination(e){return this.set("destination",e)}is(e){return this.key===e.key}}const g=t.Record({id:void 0,firstname:void 0,lastname:void 0,email:void 0,lines:void 0,username:void 0,mobileNumber:void 0,forwards:void 0,doNotDisturb:void 0,presence:"available"});class b extends g{static parse(e){return new b({id:e.uuid,firstname:e.firstname,lastname:e.lastname,email:e.email,lines:e.lines.map(e=>c.parse(e)),username:e.username,mobileNumber:e.mobile_phone_number||"",forwards:[h.parse(e.forwards.unconditional,p.UNCONDITIONAL),h.parse(e.forwards.noanswer,p.NO_ANSWER),h.parse(e.forwards.busy,p.BUSY)],doNotDisturb:e.services.dnd.enabled})}hasId(e){return e===this.id}setMobileNumber(e){return this.set("mobileNumber",e)}setForwardOption(e){const s=this.forwards.slice(),t=s.findIndex(s=>s.is(e));return s.splice(t,1,e),this.set("forwards",s)}setDoNotDisturb(e){return this.set("doNotDisturb",e)}setPresence(e){return this.set("presence",e)}}const f=t.Record({name:void 0,number:void 0,favorited:void 0,email:void 0,endpointId:void 0,entreprise:void 0,birthday:void 0,address:void 0,note:void 0,personal:void 0,presence:void 0,source:void 0,sourceId:void 0,status:void 0,uuid:void 0});class $ extends f{static merge(e,s){return s.map(s=>{const t=e.find(e=>e.is(s));return void 0!==t?s.merge(t):s})}static parseMany(e){return e.results.map(s=>$.parse(s,e.column_types))}static parse(e,s){return new $({name:e.column_values[s.indexOf("name")],number:e.column_values[s.indexOf("number")]||"",favorited:e.column_values[s.indexOf("favorite")],email:e.column_values[s.indexOf("email")]||"",entreprise:e.column_values[s.indexOf("entreprise")]||"",birthday:e.column_values[s.indexOf("birthday")]||"",address:e.column_values[s.indexOf("address")]||"",note:e.column_values[s.indexOf("note")]||"",endpointId:e.relations.endpoint_id,personal:e.column_values[s.indexOf("personal")],source:e.source,sourceId:e.relations.source_entry_id,uuid:e.relations.user_uuid})}static parseManyPersonal(e){return e.map(e=>$.parsePersonal(e))}static parsePersonal(e){return new $({name:`${e.firstName||e.firstname||""} ${e.lastName||e.lastname||""}`,number:e.number||"",email:e.email||"",source:"personal",sourceId:e.id,entreprise:e.entreprise||"",birthday:e.birthday||"",address:e.address||"",note:e.note||""})}setFavorite(e){return this.set("favorited",e)}is(e){return Boolean(e)&&this.sourceId===e.sourceId&&(!this.uuid||this.uuid===e.uuid)}hasId(e){return this.uuid===e}hasNumber(e){return this.number===e}hasEndpointId(e){return this.endpointId===e}isAvailable(){return"available"===this.presence}isDoNotDisturb(){return"donotdisturb"===this.presence}isDisconnected(){return"disconnected"===this.presence}merge(e){return this.set("presence",e.presence).set("status",e.status)}isIntern(){return!!this.uuid}isCallable(e){return!!this.number&&!!e&&!e.is(this)}separateName(){if(!this.name)return{firstName:"",lastName:""};const e=this.name.split(" ");return{firstName:e[0],lastName:e.slice(1).join(" ")}}}const v=t.Record({token:void 0,uuid:void 0,profile:void 0});class w extends v{static parse(e){return new w({token:e.data.token,uuid:e.data.xivo_user_uuid})}static using(e){return this.set("profile",e)}is(e){return Boolean(e)&&this.uuid===e.uuid}displayName(){return`${this.profile.firstname} ${this.profile.lastname}`}primaryLine(){return this.profile.lines[0]}primaryContext(){return this.primaryLine().extensions[0].context}primaryNumber(){return this.primaryLine().extensions[0].exten}}var y=(e,s)=>({checkToken:t=>e.head(`${s}/token/${t}`,null,{}),authenticate:t=>e.get(`${s}/token/${t}`,null,{}).then(u.parseBadResponse(e=>w.parse(e))),logIn(t={}){const n={backend:t.backend||"wazo_user",expiration:t.expiration||3600},r={Authorization:`Basic ${u.base64Encode(`${t.username}:${t.password}`)}`,"Content-Type":"application/json"};return e.post(`${s}/token`,n,r).then(u.parseBadResponse(e=>w.parse(e)))},logOut:t=>e.delete(`${s}/token/${t}`,null,{},u.successResponseParser),updatePassword(t,n,r,i){const a={new_password:i,old_password:r};return e.put(`${s}/users/${n}/password`,a,t,u.successResponseParser)},sendDeviceToken(t,n,r){const i={token:r};return e.post(`${s}/users/${n}/external/mobile`,i,t)},removeDeviceToken:(t,n)=>e.delete(`${s}/users/${n}/external/mobile`,null,t),getUser:(t,n)=>e.get(`${s}/users/${n}`,null,t),listTenants:t=>e.get(`${s}/tenants`,null,t),getTenant:(t,n)=>e.get(`${s}/tenants/${n}`,null,t),createTenant:(t,n)=>e.post(`${s}/tenants`,{name:n},t),deleteTenant:(t,n)=>e.delete(`${s}/tenants/${n}`,null,t),listUsers:t=>e.get(`${s}/users`,"get",null,t),listGroups:t=>e.get(`${s}/groups`,null,t),listPolicies:t=>e.get(`${s}/policies`,null,t)}),N=(e,s)=>({answerCall(t,n,r,i,a,o){const l=`${s}/${n}/nodes`,u={calls:[{id:r}]};return e.post(l,u,t,e=>e.data.uuid).then(s=>e.post(`${l}/${s}/calls`,{context:i,exten:a,autoanswer:o},t).then(e=>({nodeUuid:s,data:e})))},calls:(t,n)=>e.get(`${s}/${n}/calls`,null,t),hangupCall(t,n,r){const i=`${s}/${n}/calls/${r}`;return e.delete(i,"delete",null,t)},playCall:(t,n,r,i,a)=>e.post(`${s}/${n}/calls/${r}/play`,{language:i,uri:a},t),addCallNodes:(t,n,r,i)=>e.put(`${s}/${n}/nodes/${r}/calls/${i}`,null,t),addNewCallNodes(t,n,r,i,a,o){const l={context:i,exten:a,autoanswer:o};return e.post(`${s}/${n}/nodes/${r}/calls`,l,t)},listCallsNodes:(t,n,r)=>e.get(`${s}/${n}/nodes/${r}`,null,t),listNodes:(t,n)=>e.get(`${s}/${n}/nodes`,null,t),removeNode:(t,n,r)=>e.delete(`${s}/${n}/nodes/${r}`,null,t),removeCallNodes:(t,n,r,i)=>e.delete(`${s}/${n}/nodes/${r}/calls/${i}`,"delete",null,t)}),_=(e,s)=>({listUsers:t=>e.get(`${s}/users`,null,t),getUser:(t,n)=>e.get(`${s}/users/${n}`,null,t),updateUser(t,n,r){const i={firstname:r.firstName,lastname:r.lastName,email:r.profile,mobile_phone_number:r.mobileNumber};return e.put(`${s}/users/${n}`,i,t,u.successResponseParser)},updateForwardOption(t,n,r,i,a){const o=`${s}/users/${n}/forwards/${r}`;return e.put(o,{destination:i,enabled:a},t,u.successResponseParser)},updateDoNotDisturb(t,n,r){const i=`${s}/users/${n}/services/dnd`;return e.put(i,{enabled:r},t,u.successResponseParser)},getUserLineSip:(t,n,r)=>e.get(`${s}/users/${n}/lines/${r}/associated/endpoints/sip`,null,t),listApplications(t){const n=`${s}/applications?recurse=true`;return e.get(n,null,t)},getSIP:(t,n,r)=>e.get(`${s}/users/${n}/lines/${r}/associated/endpoints/sip`,null,t)}),k=(e,s)=>({listSubscriptions:t=>e.get(`${s}/subscriptions?recurse=true`,null,t),createSubscription(t,{tenantUuid:n,productSku:r,name:i,startDate:a,contractDate:o,autoRenew:l,term:u}){const d={product_sku:r,name:i,start_date:a,contract_date:o,auto_renew:l,term:u},c={"X-Auth-Token":t};return n&&(c["Wazo-Tenant"]=n),e.post(`${s}/subscriptions`,d,c)},getSubscription:(t,n)=>e.get(`${s}/subscriptions/${n}`,null,t),listAuthorizations:(t,n)=>e.get(`${s}/subscriptions/${n}/authorizations`,null,t),getAuthorization:(t,n,r)=>e.get(`${s}/subscriptions/${n}/authorizations/${r}`,null,t),createAuthorization(t,n,{startDate:r,term:i,service:a,rules:o,autoRenew:l}){const u=`${s}/subscriptions/${n}/authorizations`,d={start_date:r,term:i,service:a,rules:o,auto_renew:l};return e.post(u,d,t)}});const C=()=>{const e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`},D=t.Record({id:void 0,date:void 0,message:void 0,direction:void 0,destination:{serverId:void 0,userId:void 0},source:{serverId:void 0,userId:void 0},read:!0});class x extends D{static parseMany(e){return e.items.map(e=>x.parse(e))}static parse(e){return new x({id:C(),date:n(e.date),message:e.msg,direction:e.direction,destination:{serverId:e.destination_server_uuid,userId:e.destination_user_uuid},source:{serverId:e.source_server_uuid,userId:e.source_user_uuid}})}static parseMessageSent(e){return new x({id:C(),date:n(),message:e.msg,direction:"sent",destination:{serverId:e.to[0],userId:e.to[1]},source:{serverId:e.from[0],userId:e.from[1]},read:!0})}static parseMessageReceived(e){return new x({id:C(),date:n(),message:e.msg,direction:"received",destination:{serverId:e.to[0],userId:e.to[1]},source:{serverId:e.from[0],userId:e.from[1]},read:!1})}is(e){return this.id===e.id}isIncoming(){return"received"===this.direction}acknowledge(){return this.set("read",!0)}getTheOtherParty(){return"sent"===this.direction?this.destination.userId:this.source.userId}}const P=t.Record({id:void 0,date:void 0,duration:void 0,caller:{name:void 0,number:void 0},unread:void 0});class R extends P{static parse(e){return new R({id:e.id,date:n.unix(e.timestamp),duration:n.duration(e.duration,"seconds"),caller:{name:e.caller_id_name,number:e.caller_id_num},unread:e.folder?"new"===e.folder.type:void 0})}static parseMany(e){const s=e.folders.filter(e=>"new"===e.type)[0].messages,t=e.folders.filter(e=>"old"===e.type)[0].messages;return[...s.map(e=>R.parse(e)).map(e=>e.set("unread",!0)),...t.map(e=>R.parse(e)).map(e=>e.set("unread",!1))]}is(e){return e&&this.id===e.id}acknowledge(){return this.set("unread",!1)}contains(e){return!e||(this.caller.name.toUpperCase().includes(e.toUpperCase())||this.caller.number.includes(e))}}const I=t.Record({id:void 0,calleeName:void 0,calleeNumber:void 0,status:void 0,startingTime:void 0});class S extends I{static parseMany(e){return e.map(e=>S.parse(e))}static parse(e){return new S({id:e.call_id,calleeName:e.peer_caller_id_name,calleeNumber:e.peer_caller_id_number,status:e.status,startingTime:n(e.creation_time)})}separateCalleeName(){const e=this.calleeName.split(" ");return{firstName:e[0],lastName:e.slice(1).join(" ")}}is(e){return this.id===e.id}hasACalleeName(){return this.calleeName.length>0}isUp(){return"Up"===this.status}isDown(){return"Down"===this.status}isRingingIncoming(){return"Ringing"===this.status}isRingingOutgoing(){return"Ring"===this.status}isFromTransfer(){return"Down"===this.status||"Ringing"===this.status}}var O=(e,s)=>({updatePresence:(t,n)=>e.put(`${s}/users/me/presences`,{presence:n},t,u.successResponseParser),listMessages(t,n){const r=n?{participant_user_uuid:n}:null;return e.get(`${s}/users/me/chats`,r,t).then(u.parseBadResponse(e=>x.parseMany(e)))},sendMessage(t,n,r,i){const a={alias:n,message:r,to:i};return e.post(`${s}/users/me/chats`,a,t)},makeCall:(t,n)=>e.post(`${s}/users/me/calls`,{from_mobile:!0,extension:n},t),cancelCall:(t,n)=>e.delete(`${s}/users/me/calls/${n}`,null,t),listCalls:t=>e.get(`${s}/users/me/calls`,null,t).then(u.parseBadResponse(e=>S.parseMany(e.items))),relocateCall(t,n,r,i){const a={completions:["answer"],destination:r,initiator_call:n};return i&&(a.location={line_id:i}),e.post(`${s}/users/me/relocates`,a,t)},listVoicemails:t=>e.get(`${s}/users/me/voicemails`,null,t).then(u.parseBadResponse(e=>R.parseMany(e))),deleteVoicemail:(t,n)=>e.delete(`${s}/users/me/voicemails/messages/${n}`,null,t),getPresence:(t,n)=>e.get(`${s}/users/${n}/presences`,null,t),getStatus:(t,n)=>e.get(`${s}/lines/${n}/presences`,null,t)});const A=e=>({email:e.email,firstname:e.firstName,lastname:e.lastName,number:e.phoneNumber,entreprise:e.entreprise,birthday:e.birthday,address:e.address,note:e.note});var T=(e,s)=>({search:(t,n,r)=>e.get(`${s}/directories/lookup/${n}`,{term:r},t).then(u.parseBadResponse(e=>$.parseMany(e))),listPersonalContacts:t=>e.get(`${s}/personal`,null,t).then(u.parseBadResponse(e=>$.parseManyPersonal(e))),addContact:(t,n)=>e.post(`${s}/personal`,A(n),t).then(u.parseBadResponse(e=>$.parsePersonal(e))),editContact:(t,n)=>e.put(`${s}/personal/${n.id}`,A(n),t),deleteContact:(t,n)=>e.delete(`${s}/personal/${n}`,null,t),listFavorites:(t,n)=>e.get(`${s}/directories/favorites/${n}`,null,t).then(u.parseBadResponse(e=>$.parseMany(e))),markAsFavorite(t,n,r){const i=`${s}/directories/favorites/${n}/${r}`;return e.put(i,"put",null,t,u.successResponseParser)},removeFavorite:(t,n,r)=>e.delete(`${s}/directories/favorites/${n}/${r}`,null,t)});const U=t.Record({answer:void 0,answered:void 0,newMissedCall:!1,callDirection:void 0,destination:void 0,source:void 0,id:void 0,duration:void 0,start:void 0,end:void 0});class M extends U{static merge(e,s){const t=e.concat(s);return t.map(e=>e.id).filter((e,s,t)=>t.indexOf(e)===s).map(e=>t.find(s=>s.id===e))}static parseMany(e){return e.items.map(e=>M.parse(e))}static parse(e){return new M({answer:n(e.answer),answered:e.answered,callDirection:e.call_direction,destination:{extension:e.destination_extension,name:e.destination_name},source:{extension:e.source_extension,name:e.source_name},id:e.id,duration:1e3*(e.duration||0),start:n(e.start),end:n(e.end)})}static parseNew(e,s){return new M({answer:n(e.answer),answered:e.answered,callDirection:e.call_direction,destination:{extension:e.destination_extension,name:e.destination_name},source:{extension:e.source_extension,name:e.source_name},id:e.id,duration:1e3*(e.duration||0),start:n(e.start),end:n(e.end),newMissedCall:e.destination_extension===s.primaryNumber()&&!e.answered})}isFromSameParty(e,s){return this.theOtherParty(s).extension===e.theOtherParty(s).extension}theOtherParty(e){return this.source.extension===e.primaryNumber()?this.destination:this.source}isNewMissedCall(){return this.newMissedCall}acknowledgeCall(){return this.set("newMissedCall",!1)}isAcknowledged(){return this.newMissedCall}isAnOutgoingCall(e){return this.source.extension===e.primaryNumber()&&this.answered}isAMissedOutgoingCall(e){return this.source.extension===e.primaryNumber()&&!this.answered}isAnIncomingCall(e){return this.destination.extension===e.primaryNumber()&&this.answered}isADeclinedCall(e){return this.destination.extension===e.primaryNumber()&&!this.answered}}var E=(e,s)=>({search:(t,n,r=5)=>e.get(`${s}/users/me/cdr`,{search:n,limit:r},t).then(u.parseBadResponse(e=>M.parseMany(e))),listCallLogs:(t,n,r=5)=>e.get(`${s}/users/me/cdr`,{offset:n,limit:r},t).then(u.parseBadResponse(e=>M.parseMany(e))),listCallLogsFromDate:(t,n,r)=>e.get(`${s}/users/me/cdr`,{from:n,number:r},t).then(u.parseBadResponse(e=>M.parseMany(e)))});const B="0.1",j="1.0",z="1.1",L="1.0",F="1.0",H="0.1",W="1.0";class q{constructor(){this.callbacks={}}on(e,s){this.callbacks[e]=s}triggerCallback(e,...s){return s.push(e),this.callbacks["*"]?this.callbacks["*"].apply(void 0,s):e in this.callbacks?this.callbacks[e].apply(void 0,s):null}}const G=["STATUS_NULL","STATUS_NEW","STATUS_CONNECTING","STATUS_CONNECTED","STATUS_COMPLETED"],V=["registered","unregistered","new","ringing","connecting","connected","ended","hold","unhold","mute","unmute","dtmf","message"],J=e=>({caller_id_name:e.remoteIdentity.displayName,caller_id_number:e.remoteIdentity.uri.user}),Y=e=>!!e.getHeader("alert-info"),X=/^\+?[0-9#*]+$/;const K=t.Record({sound:!0,vibration:!0});class Q extends K{static parse(e){return e?new Q({sound:e.sound,vibration:e.vibration}):new Q}setSound(e){return this.set("sound",e)}setVibration(e){return this.set("vibration",e)}enable(){return this.set("vibration",!0).set("sound",!0)}disable(){return this.set("vibration",!1).set("sound",!1)}isEnabled(){return this.sound||this.vibration}}return{WazoApiClient:class{constructor({server:e,agent:s=null}){this.updatePatemers({server:e,agent:s})}initializeEndpoints(){this.auth=y(this.client,`auth/${B}`),this.application=N(this.client,`ctid-ng/${j}/applications`),this.confd=_(this.client,`confd/${z}`),this.accessd=k(this.client,`accessd/${L}`),this.ctidNg=O(this.client,`ctid-ng/${F}`),this.dird=T(this.client,`dird/${H}`),this.callLogd=E(this.client,`call-logd/${W}`)}updatePatemers({server:e,agent:s}){this.client=new u({server:e,agent:s}),this.initializeEndpoints()}},WazoWebRTCClient:class{constructor(e){this.config=e,this.userAgent=this.configureUserAgent(),this.callbacksHandler=new q}configureUserAgent(){const e=new r.Web.Simple(this.getConfig());return V.filter(e=>"new"!==e).forEach(s=>{e.on(s,e=>{this.callbacksHandler.triggerCallback(s,e)})}),e.on("new",e=>{this.callbacksHandler.triggerCallback("new",{callerid:J(e),autoanswer:Y(e.request)})}),e}on(e,s){this.callbacksHandler.on(e,s)}getConfig(){const{media:{audio:e,video:s,localAudio:t,localVideo:n}}=this.config;return{media:{remote:{audio:s||e,video:s},local:{audio:n||t,video:n}},ua:{traceSip:!1,displayName:this.config.displayName,uri:this.config.uri,wsServers:this.config.wsServers,authorizationUser:this.config.authorizationUser,password:this.config.password,sessionDescriptionHandlerFactoryOptions:{peerConnectionOptions:{iceCheckingTimeout:500,rtcpMuxPolicy:"negotiate",rtcConfiguration:{iceServers:{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302"]}}}}}}}getState(){return G[this.userAgent.state]}call(e){X.exec(e)&&this.userAgent.call(e)}answer(){this.userAgent.answer()}reject(){this.userAgent.reject()}hangup(){this.userAgent.hangup()}close(){this.userAgent.transport.disconnect()}},WazoWebSocketClient:class{constructor({host:e,token:s,events:t=[]}){this.initialized=!1,this.callbacksHandler=new q,this.host=e,this.token=s,this.events=t}connect(){const e=new i(`wss://${this.host}/api/websocketd/?token=${this.token}`);return e.debug=!1,e.onmessage=(s=>{const t=JSON.parse("string"==typeof s.data?s.data:"{}");this.initialized?this.callbacksHandler.triggerCallback(t.name,t):this.handleMessage(t,e)}),e.onclose=(e=>{e.code}),e}on(e,s){this.callbacksHandler.on(e,s)}handleMessage(e,s){switch(e.op){case"init":this.events.forEach(e=>{const t={op:"subscribe",data:{event_name:e}};s.send(JSON.stringify(t))}),s.send(JSON.stringify({op:"start"}));break;case"subscribe":break;case"start":this.initialized=!0}}},BadResponse:a,Call:S,CallLog:M,ChatMessage:x,Contact:$,Country:{BELGIUM:"BE",CANADA:"CA",FRANCE:"FR",GERMANY:"DE",ITALY:"IT",PORTUGAL:"PT",SPAIN:"ES",SWITZERLAND:"CH",UNITED_KINGDOM:"GB",UNITED_STATES:"US"},ForwardOption:h,Line:c,NotificationOptions:Q,Profile:b,Session:w,Voicemail:R,DebugPhone:class{makeCall(e){console.info("DebugPhone - calling: ${number}")}acceptCall(){console.info("DebugPhone - Accept call")}mute(){console.info("DebugPhone - Mute phone")}unmute(){console.info("DebugPhone - Unmute phone")}hold(){console.info("DebugPhone - Put on hold")}unhold(){console.info("DebugPhone - Put on unhold")}transfer(e){console.info(`DebugPhone - Transferring to ${e}`)}sendKey(e){console.info("DebugPhone - sending: ${key}")}putOnSpeaker(){console.info("DebugPhone - Put on speaker")}putOffSpeaker(){console.info("DebugPhone - Put off speaker")}endCall(){console.info("DebugPhone - Hang up")}onConnectionMade(){console.info("DebugPhone - Connection made")}close(){console.info("DebugPhone - Close")}},DebugDevice:class{connectToCall(){console.info("DebugDevice - Connected to call")}disconnectFromCall(){console.info("DebugDevice - Disconnected from call")}ringback(){console.info("DebugDevice - Ringback")}stopRingback(){console.info("DebugDevice - Stop ringback")}playRingtone(){console.info("DebugDevice - Play ringtone")}stopRingtone(){console.info("DebugDevice - Stop ringtone")}mute(){console.info("DebugDevice - Mute")}unmute(){console.info("DebugDevice - Unmute")}putOnSpeaker(){console.info("DebugDevice - Put on speaker")}putOffSpeaker(){console.info("DebugDevice - Put off speaker")}}}});
